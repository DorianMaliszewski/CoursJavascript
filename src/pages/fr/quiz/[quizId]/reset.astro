---
import { getRelativeLocaleUrl } from "astro:i18n";
import { PATHS } from "paths";
import { getCookieName } from "utils/getCookieName";

export const prerender = false;

const { quizId } = Astro.params;
if (!quizId) {
  return Astro.redirect("/404");
}
const cookieKey = getCookieName(quizId);

if (await Astro.session?.has(cookieKey)) {
  Astro.session?.delete(cookieKey);
}

return Astro.redirect(
  getRelativeLocaleUrl(Astro.currentLocale, PATHS.quiz(quizId, 1)),
);
---
